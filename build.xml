<?xml version="1.0"?>
<!--
   $Id$

   Copyright (C) GNU/GPL AVOIR 2007
   This program is free software; you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation; either version 2 of the License, or
   (at your option) any later version.

   This program is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with this program; if not, write to the Free Software
  Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
-->
<project name="chisimba_modules"  basedir="." default="build">

  <!-- local location that will contain the archives generated by this build -->
  <property name="build.dir" value="build"/>
  <property name="version" value="nightly"/>
  <property name="base.archive.file.name" value="chisimba_modules_${version}"/>
  
  <!-- set of files that should end up in archive files generated by build -->
  <fileset dir="." id="archive.files">
    <include name="**/**"/>
    <exclude name="CVS/**"/>
    <exclude name="CVSROOT/**"/>
    <exclude name="build/**"/>
    <exclude name="build.xml"/>
  </fileset>
  
  <target name="clean" description="Removes any files generated by this build">
    <delete dir="${build.dir}" includeemptydirs="true"  verbose="true"/>
  </target>
  
  <target name="init" description="Performs any initialisation steps required by this build">
    <mkdir dir="${build.dir}"/>
  </target>
  
  <target name="build" description="Generates .tgz and .zip file containing the modules" 
          depends="init, build-tgz, build-zip">
  </target>
  
  <target name="build-tgz" description="Generates .tgz file containing modules" depends="init">
    <property name="tarfile" value="${build.dir}/${base.archive.file.name}.tgz"/>
    <tar destfile="${tarfile}" compression="gzip">
      <fileset refid="archive.files"/>
    </tar>
  </target>
  
  <target name="build-zip" description="Generates .zip file containing modules" depends="init">
    <property name="zipfile" value="${build.dir}/${base.archive.file.name}.zip"/>
    <zip destfile="${zipfile}">
      <fileset refid="archive.files"/>
    </zip>
  </target>
  
</project>

