<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>hosportal: Z:/hosportal/classes/dbhosportal_replies_class_inc.php Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_0a31c64d9f1f2c74acde1e4feea70c37.html">Z:</a>&nbsp;&raquo;&nbsp;<a class="el" href="dir_7158bbc9595695ab050065f9f93d92fc.html">hosportal</a>&nbsp;&raquo;&nbsp;<a class="el" href="dir_8ee1c05ea8a5a743dff4641a15d48cf4.html">classes</a>
  </div>
</div>
<div class="contents">
<h1>dbhosportal_replies_class_inc.php</h1><a href="dbhosportal__replies__class__inc_8php.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00002"></a>00002 <span class="comment">/* ----------- data class extends dbTable------------*/</span>
<a name="l00003"></a>00003 <span class="comment">// security check - must be included in all scripts</span>
<a name="l00004"></a>00004 <span class="keywordflow">if</span> (!$GLOBALS[<span class="stringliteral">&#39;kewl_entry_point_run&#39;</span>]) {
<a name="l00005"></a>00005     die(<span class="stringliteral">&quot;You cannot view this page directly&quot;</span>);
<a name="l00006"></a>00006 }
<a name="l00007"></a>00007 
<a name="l00024"></a><a class="code" href="classdbhosportal__replies.html">00024</a> <span class="keyword">class </span><a class="code" href="classdbhosportal__replies.html" title="Class that models the hosportal replies database.">dbhosportal_replies</a> <span class="keyword">extends</span> dbTable {
<a name="l00030"></a><a class="code" href="classdbhosportal__replies.html#a927e814ba9b9a8f991273b3077ff2945">00030</a>     <span class="keyword">private</span> <a class="code" href="classdbhosportal__replies.html#a927e814ba9b9a8f991273b3077ff2945" title="Private data member of class dbhosportal_replies that stores an object of another...">$objUser</a>;
<a name="l00031"></a>00031 
<a name="l00038"></a><a class="code" href="classdbhosportal__replies.html#a4be4055f3361d4800e16bc2e2e38cda6">00038</a>     function <a class="code" href="classdbhosportal__replies.html#a4be4055f3361d4800e16bc2e2e38cda6" title="Constructor that set up this class.">init</a>() {
<a name="l00041"></a>00041         <a class="code" href="classdbhosportal__replies.html#a4be4055f3361d4800e16bc2e2e38cda6" title="Constructor that set up this class.">parent::init</a>(<span class="stringliteral">&#39;tbl_hosportal_replies&#39;</span>);
<a name="l00043"></a>00043         $this-&gt;objUser = $this-&gt;getObject(<span class="stringliteral">&#39;user_module&#39;</span>,<span class="stringliteral">&#39;hosportal&#39;</span>);
<a name="l00044"></a>00044     }
<a name="l00045"></a>00045 
<a name="l00050"></a><a class="code" href="classdbhosportal__replies.html#a36f36c993f4da045e541d3b8818a2734">00050</a>     function <a class="code" href="classdbhosportal__replies.html#a36f36c993f4da045e541d3b8818a2734" title="Memeber function that returns all entries in the tbl_hosportal_replies database.">listAll</a>() {
<a name="l00052"></a>00052         <span class="keywordflow">return</span> $this-&gt;getAll();
<a name="l00054"></a>00054     }
<a name="l00055"></a>00055 
<a name="l00064"></a><a class="code" href="classdbhosportal__replies.html#adfabbb158ca5fb1c0e1905ade3a99af7">00064</a>     function <a class="code" href="classdbhosportal__replies.html#adfabbb158ca5fb1c0e1905ade3a99af7" title="Member function to search the entire replies database for a certain comment and return...">listComment</a>($comments) {
<a name="l00065"></a>00065         <span class="keywordflow">return</span> $this-&gt;getAll(<span class="stringliteral">&quot;WHERE commenttxt LIKE &#39;%&quot;</span> . $comments . <span class="stringliteral">&quot;%&#39;&quot;</span>);
<a name="l00066"></a>00066     }
<a name="l00067"></a>00067 
<a name="l00076"></a><a class="code" href="classdbhosportal__replies.html#a5aac3ad3d72346b4285f8f4b55f290b3">00076</a>     function <a class="code" href="classdbhosportal__replies.html#a5aac3ad3d72346b4285f8f4b55f290b3" title="Member function to return a single entry with a specific id.">listSingle</a>($id) {
<a name="l00077"></a>00077         <span class="keywordflow">return</span> $this-&gt;getAll(<span class="stringliteral">&quot;WHERE id=&#39;&quot;</span> . $id . <span class="stringliteral">&quot;&#39;&quot;</span>);
<a name="l00078"></a>00078     }
<a name="l00079"></a>00079 
<a name="l00092"></a><a class="code" href="classdbhosportal__replies.html#a868d95c55c02f729ad65de3f3e5f31d4">00092</a>     function <a class="code" href="classdbhosportal__replies.html#a868d95c55c02f729ad65de3f3e5f31d4" title="Member function to insert a new entry into the replies database.">insertSingle</a>($id,$title,$comments,$unreplied,$noofreplies) {
<a name="l00094"></a>00094         $userid = $this-&gt;objUser-&gt;getUserFullName();
<a name="l00098"></a>00098         $id = $this-&gt;insert(array(
<a name="l00099"></a>00099                 <span class="stringliteral">&#39;id&#39;</span> =&gt; $id,
<a name="l00100"></a>00100                 <span class="stringliteral">&#39;userid&#39;</span> =&gt; $userid,
<a name="l00101"></a>00101                 <span class="stringliteral">&#39;title&#39;</span> =&gt; $title,
<a name="l00102"></a>00102                 <span class="stringliteral">&#39;commenttxt&#39;</span> =&gt; $comments,
<a name="l00103"></a>00103                 <span class="stringliteral">&#39;modified&#39;</span>=&gt; $this-&gt;now(),
<a name="l00104"></a>00104                 <span class="stringliteral">&#39;commenttxtshort&#39;</span>=&gt; $comments,
<a name="l00105"></a>00105                 <span class="stringliteral">&#39;unreplied&#39;</span>=&gt; $unreplied,
<a name="l00106"></a>00106                 <span class="stringliteral">&#39;replies&#39;</span> =&gt; $noofreplies
<a name="l00107"></a>00107         ));
<a name="l00109"></a>00109         <span class="keywordflow">return</span> $id;
<a name="l00110"></a>00110     }
<a name="l00111"></a>00111 
<a name="l00124"></a><a class="code" href="classdbhosportal__replies.html#a478883a1538b564b0efa4b599f62e4f4">00124</a>     function <a class="code" href="classdbhosportal__replies.html#a478883a1538b564b0efa4b599f62e4f4" title="Member function to edit an existing entry in the replies database.">updateSingle</a>($id, $title, $comments,$unreplied,$noofreplies) {
<a name="l00126"></a>00126         $userid = $this-&gt;objUser-&gt;getUserFullName();
<a name="l00130"></a>00130         $data=array(<span class="stringliteral">&quot;userid&quot;</span>=&gt;$userid,<span class="stringliteral">&quot;title&quot;</span>=&gt;$title,<span class="stringliteral">&quot;commenttxt&quot;</span>=&gt;$comments,<span class="stringliteral">&quot;modified&quot;</span>=&gt;$this-&gt;now(),<span class="stringliteral">&quot;commenttxtshort&quot;</span>=&gt;$comments,<span class="stringliteral">&quot;unreplied&quot;</span>=&gt;$unreplied,<span class="stringliteral">&quot;replies&quot;</span> =&gt; $noofreplies );
<a name="l00131"></a>00131 
<a name="l00132"></a>00132         $result = $this-&gt;update(<span class="stringliteral">&#39;id&#39;</span>,$id,$data);
<a name="l00134"></a>00134         <span class="keywordflow">return</span> $result;
<a name="l00135"></a>00135     }
<a name="l00136"></a>00136 
<a name="l00143"></a><a class="code" href="classdbhosportal__replies.html#a518fd38a24fbbf1fb3433a94305080d3">00143</a>     function <a class="code" href="classdbhosportal__replies.html#a518fd38a24fbbf1fb3433a94305080d3" title="Member function to delete an existing entry in the replies database.">deleteSingle</a>($id) {
<a name="l00145"></a>00145         $this-&gt;<span class="keyword">delete</span>(<span class="stringliteral">&quot;id&quot;</span>, $id);
<a name="l00147"></a>00147     }
<a name="l00148"></a>00148 
<a name="l00156"></a><a class="code" href="classdbhosportal__replies.html#ad4fa83e39a7f318ed781fd1b78f296e3">00156</a>     function <a class="code" href="classdbhosportal__replies.html#ad4fa83e39a7f318ed781fd1b78f296e3" title="Member function to get the no of replies that contain the search parameter.">getNoOfSearchedReplies</a>($subject_matter,$searchValue) {
<a name="l00158"></a>00158 <span class="comment">// where the comments OR the subject matter OR the author is like the search parameter and store</span>
<a name="l00160"></a>00160 <span class="comment"></span>        $sql=   <span class="stringliteral">&quot;where title like &#39;&quot;</span>.$subject_matter.<span class="stringliteral">&quot;&#39; and commenttxt like &#39;%&quot;</span>.$searchValue.<span class="stringliteral">&quot;%&#39; || userid like &#39;%$searchValue%&#39;&quot;</span>;
<a name="l00161"></a>00161 
<a name="l00163"></a>00163         <span class="keywordflow">return</span> $this-&gt;getRecordCount($sql);
<a name="l00164"></a>00164     }
<a name="l00165"></a>00165 
<a name="l00179"></a><a class="code" href="classdbhosportal__replies.html#a9985983cc1768f7a1986a1ba2c297ac9">00179</a>     function <a class="code" href="classdbhosportal__replies.html#a9985983cc1768f7a1986a1ba2c297ac9" title="Member function to get all entries that contain the search parameter.">searchReplies</a>($subject_matter,$searchValue,$number_of_entries_per_page = 5,$starting_element = 0) {
<a name="l00181"></a>00181 <span class="comment">//is like the comments or subject matter or</span>
<a name="l00183"></a>00183 <span class="comment"></span>        $sql=   <span class="stringliteral">&quot;select * from tbl_hosportal_replies where title like &#39;&quot;</span>.$subject_matter.<span class="stringliteral">&quot;&#39; and commenttxt like &#39;%&quot;</span>.$searchValue.<span class="stringliteral">&quot;%&#39; || userid like &#39;%$searchValue%&#39; order by modified desc LIMIT $number_of_entries_per_page OFFSET $starting_element&quot;</span>;
<a name="l00184"></a>00184 
<a name="l00186"></a>00186         <span class="keywordflow">return</span> $this-&gt;getArray($sql);
<a name="l00187"></a>00187 
<a name="l00188"></a>00188     }
<a name="l00189"></a>00189 
<a name="l00201"></a><a class="code" href="classdbhosportal__replies.html#acc74c5cc4240a68e90eba8abd176e50b">00201</a>     function <a class="code" href="classdbhosportal__replies.html#acc74c5cc4240a68e90eba8abd176e50b" title="Member function to sort all entries by latest modified and return that result as...">sortByLatestModified</a>($subject_matter = <span class="stringliteral">&#39;&#39;</span>,$number_of_entries_per_page = 5,$starting_element = 0) {
<a name="l00203"></a>00203 <span class="comment">//and order them by the field modified and store the result in a temporary variable. The language MYSQL is used to do this.</span>
<a name="l00204"></a>00204 <span class="comment">//It is important to note that no changes are being made in the database.</span>
<a name="l00205"></a>00205         $sql = <span class="stringliteral">&quot;select*from tbl_hosportal_replies WHERE title LIKE &#39;&quot;</span>.$subject_matter.<span class="stringliteral">&quot;&#39; order by modified desc LIMIT $number_of_entries_per_page OFFSET $starting_element&quot;</span>;
<a name="l00207"></a>00207         <span class="keywordflow">return</span> $this-&gt;getArray($sql);
<a name="l00208"></a>00208     }
<a name="l00209"></a>00209 
<a name="l00214"></a><a class="code" href="classdbhosportal__replies.html#a880b2ab81ce961d86ca223f138f0fbc3">00214</a>     function <a class="code" href="classdbhosportal__replies.html#a880b2ab81ce961d86ca223f138f0fbc3" title="This member function is very similiar to the sort be last modified function. To see...">sortByOldestModified</a>($subject_matter = <span class="stringliteral">&#39;&#39;</span>, $number_of_entries_per_page = 5,$starting_element = 0) {
<a name="l00215"></a>00215 
<a name="l00216"></a>00216         $sql = <span class="stringliteral">&quot;select*from tbl_hosportal_replies WHERE title LIKE &#39;&quot;</span>.$subject_matter.<span class="stringliteral">&quot;&#39; order by modified asc LIMIT $number_of_entries_per_page OFFSET $starting_element&quot;</span>;
<a name="l00217"></a>00217         <span class="keywordflow">return</span> $this-&gt;getArray($sql);
<a name="l00218"></a>00218 
<a name="l00219"></a>00219     }
<a name="l00220"></a>00220 
<a name="l00225"></a><a class="code" href="classdbhosportal__replies.html#a65ca0d66a025ee5af800a32b3dae3681">00225</a>     function <a class="code" href="classdbhosportal__replies.html#a65ca0d66a025ee5af800a32b3dae3681" title="This member function is very similiar to the sort be last modified function. To see...">sortByAuthorAtoZ</a>($subject_matter = <span class="stringliteral">&#39;&#39;</span>,$number_of_entries_per_page = 5,$starting_element = 0) {
<a name="l00226"></a>00226 
<a name="l00227"></a>00227         $sql = <span class="stringliteral">&quot;select*from tbl_hosportal_replies WHERE title LIKE &#39;&quot;</span>.$subject_matter.<span class="stringliteral">&quot;&#39; order by userid asc LIMIT $number_of_entries_per_page OFFSET $starting_element&quot;</span>;
<a name="l00228"></a>00228         <span class="keywordflow">return</span> $this-&gt;getArray($sql);
<a name="l00229"></a>00229     }
<a name="l00230"></a>00230 
<a name="l00235"></a><a class="code" href="classdbhosportal__replies.html#ad58f14e1c92fe6a6e9e2d5914435a53b">00235</a>     function <a class="code" href="classdbhosportal__replies.html#ad58f14e1c92fe6a6e9e2d5914435a53b" title="This member function is very similiar to the sort be last modified function. To see...">sortByAuthorZtoA</a>($subject_matter = <span class="stringliteral">&#39;&#39;</span>,$number_of_entries_per_page = 5,$starting_element = 0) {
<a name="l00236"></a>00236 
<a name="l00237"></a>00237         $sql = <span class="stringliteral">&quot;select*from tbl_hosportal_replies WHERE title LIKE &#39;&quot;</span>.$subject_matter.<span class="stringliteral">&quot;&#39; order by userid desc LIMIT $number_of_entries_per_page OFFSET $starting_element&quot;</span>;
<a name="l00238"></a>00238         <span class="keywordflow">return</span> $this-&gt;getArray($sql);
<a name="l00239"></a>00239     }
<a name="l00240"></a>00240 
<a name="l00245"></a><a class="code" href="classdbhosportal__replies.html#a7ca663d8792a359e4b672e36b26746a4">00245</a>     function <a class="code" href="classdbhosportal__replies.html#a7ca663d8792a359e4b672e36b26746a4" title="This member function is very similiar to the sort be last modified function. To see...">sortBySubjectMatterAtoZ</a>($number_of_entries_per_page = 5,$starting_element = 0) {
<a name="l00246"></a>00246 
<a name="l00247"></a>00247         $sql = <span class="stringliteral">&quot;select*from tbl_hosportal_replies WHERE title LIKE &#39;&quot;</span>.$subject_matter.<span class="stringliteral">&quot;&#39; order by title asc LIMIT $number_of_entries_per_page OFFSET $starting_element&quot;</span>;
<a name="l00248"></a>00248         <span class="keywordflow">return</span> $this-&gt;getArray($sql);
<a name="l00249"></a>00249 
<a name="l00250"></a>00250     }
<a name="l00251"></a>00251 
<a name="l00257"></a><a class="code" href="classdbhosportal__replies.html#a4539c02e8f6863a4c9ca01d9c87397bc">00257</a>     function <a class="code" href="classdbhosportal__replies.html#a4539c02e8f6863a4c9ca01d9c87397bc" title="This member function is very similiar to the sort be last modified function. To see...">sortBySubjectMatterZtoA</a>($number_of_entries_per_page = 5,$starting_element = 0) {
<a name="l00258"></a>00258         $sql = <span class="stringliteral">&quot;select*from tbl_hosportal_replies order by title desc LIMIT $number_of_entries_per_page OFFSET $starting_element&quot;</span>;
<a name="l00259"></a>00259         <span class="keywordflow">return</span> $this-&gt;getArray($sql);
<a name="l00260"></a>00260     }
<a name="l00261"></a>00261 
<a name="l00262"></a>00262 
<a name="l00267"></a><a class="code" href="classdbhosportal__replies.html#a2ca3c7eeba3986f18efa42e2dd27a363">00267</a>     function <a class="code" href="classdbhosportal__replies.html#a2ca3c7eeba3986f18efa42e2dd27a363" title="This member function is very similiar to the sort be last modified function. To see...">sortByMostReplies</a>($number_of_entries_per_page = 5,$starting_element = 0) {
<a name="l00268"></a>00268         $sql = <span class="stringliteral">&quot;select*from tbl_hosportal_replies order by replies desc LIMIT $number_of_entries_per_page OFFSET $starting_element&quot;</span>;
<a name="l00269"></a>00269         <span class="keywordflow">return</span> $this-&gt;getArray($sql);
<a name="l00270"></a>00270     }
<a name="l00271"></a>00271 
<a name="l00276"></a><a class="code" href="classdbhosportal__replies.html#acddae2005579cc482a31f0b9640cb771">00276</a>     function <a class="code" href="classdbhosportal__replies.html#acddae2005579cc482a31f0b9640cb771" title="This member function is very similiar to the sort be last modified function. To see...">sortByLeastReplies</a>($number_of_entries_per_page = 5,$starting_element = 0) {
<a name="l00277"></a>00277         $sql = <span class="stringliteral">&quot;select*from tbl_hosportal_replies order by replies asc LIMIT $number_of_entries_per_page OFFSET $starting_element&quot;</span>;
<a name="l00278"></a>00278         <span class="keywordflow">return</span> $this-&gt;getArray($sql);
<a name="l00279"></a>00279     }
<a name="l00280"></a>00280 }
<a name="l00281"></a>00281 ?&gt;
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Fri May 7 08:42:21 2010 for hosportal by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
