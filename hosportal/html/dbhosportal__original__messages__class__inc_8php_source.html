<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>hosportal: Z:/hosportal/classes/dbhosportal_original_messages_class_inc.php Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_0a31c64d9f1f2c74acde1e4feea70c37.html">Z:</a>&nbsp;&raquo;&nbsp;<a class="el" href="dir_7158bbc9595695ab050065f9f93d92fc.html">hosportal</a>&nbsp;&raquo;&nbsp;<a class="el" href="dir_8ee1c05ea8a5a743dff4641a15d48cf4.html">classes</a>
  </div>
</div>
<div class="contents">
<h1>dbhosportal_original_messages_class_inc.php</h1><a href="dbhosportal__original__messages__class__inc_8php.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00002"></a>00002 <span class="comment">/* ----------- data class extends dbTable------------*/</span>
<a name="l00003"></a>00003 <span class="comment">// security check - must be included in all scripts</span>
<a name="l00004"></a>00004 <span class="keywordflow">if</span> (!$GLOBALS[<span class="stringliteral">&#39;kewl_entry_point_run&#39;</span>]) {
<a name="l00005"></a>00005     die(<span class="stringliteral">&quot;You cannot view this page directly&quot;</span>);
<a name="l00006"></a>00006 }
<a name="l00007"></a>00007 
<a name="l00024"></a><a class="code" href="classdbhosportal__original__messages.html">00024</a> <span class="keyword">class </span><a class="code" href="classdbhosportal__original__messages.html" title="Class that models the hosportal orginal message database.">dbhosportal_original_messages</a> <span class="keyword">extends</span> dbTable {
<a name="l00025"></a>00025 
<a name="l00031"></a><a class="code" href="classdbhosportal__original__messages.html#a927e814ba9b9a8f991273b3077ff2945">00031</a>     <span class="keyword">private</span> <a class="code" href="classdbhosportal__original__messages.html#a927e814ba9b9a8f991273b3077ff2945" title="Private data member of class dbhosportal_original_messages that stores an object...">$objUser</a>;
<a name="l00032"></a>00032 
<a name="l00039"></a><a class="code" href="classdbhosportal__original__messages.html#a4be4055f3361d4800e16bc2e2e38cda6">00039</a>     function <a class="code" href="classdbhosportal__original__messages.html#a4be4055f3361d4800e16bc2e2e38cda6" title="Constructor that set up this class.">init</a>() {
<a name="l00042"></a>00042         <a class="code" href="classdbhosportal__original__messages.html#a4be4055f3361d4800e16bc2e2e38cda6" title="Constructor that set up this class.">parent::init</a>(<span class="stringliteral">&#39;tbl_hosportal_original_messages&#39;</span>);
<a name="l00043"></a>00043 
<a name="l00045"></a>00045         $this-&gt;objUser = $this-&gt;getObject(<span class="stringliteral">&#39;user_module&#39;</span>,<span class="stringliteral">&#39;hosportal&#39;</span>);
<a name="l00046"></a>00046 
<a name="l00047"></a>00047     }
<a name="l00048"></a>00048 
<a name="l00053"></a><a class="code" href="classdbhosportal__original__messages.html#a36f36c993f4da045e541d3b8818a2734">00053</a>     function <a class="code" href="classdbhosportal__original__messages.html#a36f36c993f4da045e541d3b8818a2734" title="Memeber function that returns all entries in the tbl_hosportal_original_messages...">listAll</a>() {
<a name="l00055"></a>00055         <span class="keywordflow">return</span> $this-&gt;getAll();
<a name="l00057"></a>00057 
<a name="l00058"></a>00058     }
<a name="l00059"></a>00059 
<a name="l00068"></a><a class="code" href="classdbhosportal__original__messages.html#adfabbb158ca5fb1c0e1905ade3a99af7">00068</a>     function <a class="code" href="classdbhosportal__original__messages.html#adfabbb158ca5fb1c0e1905ade3a99af7" title="Member function to search the entire original message database for a certain comment...">listComment</a>($comments) {
<a name="l00069"></a>00069         <span class="keywordflow">return</span> $this-&gt;getAll(<span class="stringliteral">&quot;WHERE commenttxt LIKE &#39;%&quot;</span> . $comments . <span class="stringliteral">&quot;%&#39;&quot;</span>);
<a name="l00070"></a>00070     }
<a name="l00071"></a>00071 
<a name="l00080"></a><a class="code" href="classdbhosportal__original__messages.html#a5aac3ad3d72346b4285f8f4b55f290b3">00080</a>     function <a class="code" href="classdbhosportal__original__messages.html#a5aac3ad3d72346b4285f8f4b55f290b3" title="Member function to return a single entry with a specific id.">listSingle</a>($id) {
<a name="l00081"></a>00081         <span class="keywordflow">return</span> $this-&gt;getAll(<span class="stringliteral">&quot;WHERE id=&#39;&quot;</span> . $id . <span class="stringliteral">&quot;&#39;&quot;</span>);
<a name="l00082"></a>00082     }
<a name="l00083"></a>00083 
<a name="l00096"></a><a class="code" href="classdbhosportal__original__messages.html#a868d95c55c02f729ad65de3f3e5f31d4">00096</a>     function <a class="code" href="classdbhosportal__original__messages.html#a868d95c55c02f729ad65de3f3e5f31d4" title="Member function to insert a new entry into the original messages database.">insertSingle</a>($id,$title,$comments,$unreplied,$noofreplies) {
<a name="l00097"></a>00097 
<a name="l00099"></a>00099         $userid = $this-&gt;objUser-&gt;getUserFullName();
<a name="l00103"></a>00103         $id = $this-&gt;insert(array(
<a name="l00104"></a>00104                 <span class="stringliteral">&#39;id&#39;</span> =&gt; $id,
<a name="l00105"></a>00105                 <span class="stringliteral">&#39;userid&#39;</span> =&gt; $userid,
<a name="l00106"></a>00106                 <span class="stringliteral">&#39;title&#39;</span> =&gt; $title,
<a name="l00107"></a>00107                 <span class="stringliteral">&#39;commenttxt&#39;</span> =&gt; $comments,
<a name="l00108"></a>00108                 <span class="stringliteral">&#39;modified&#39;</span>=&gt; $this-&gt;now(),
<a name="l00109"></a>00109                 <span class="stringliteral">&#39;commenttxtshort&#39;</span>=&gt; $comments,
<a name="l00110"></a>00110                 <span class="stringliteral">&#39;unreplied&#39;</span>=&gt; $unreplied,
<a name="l00111"></a>00111                 <span class="stringliteral">&#39;replies&#39;</span> =&gt; $noofreplies
<a name="l00112"></a>00112         ));
<a name="l00113"></a>00113 
<a name="l00115"></a>00115         <span class="keywordflow">return</span> $id;
<a name="l00116"></a>00116     }
<a name="l00117"></a>00117 
<a name="l00130"></a><a class="code" href="classdbhosportal__original__messages.html#a478883a1538b564b0efa4b599f62e4f4">00130</a>     function <a class="code" href="classdbhosportal__original__messages.html#a478883a1538b564b0efa4b599f62e4f4" title="Member function to edit an existing entry in the original messages database.">updateSingle</a>($id, $title, $comments,$unreplied,$noofreplies) {
<a name="l00132"></a>00132         $userid = $this-&gt;objUser-&gt;getUserFullName();
<a name="l00136"></a>00136         $data=array(<span class="stringliteral">&quot;userid&quot;</span>=&gt;$userid,<span class="stringliteral">&quot;title&quot;</span>=&gt;$title,<span class="stringliteral">&quot;commenttxt&quot;</span>=&gt;$comments,<span class="stringliteral">&quot;modified&quot;</span>=&gt;$this-&gt;now(),<span class="stringliteral">&quot;commenttxtshort&quot;</span>=&gt;$comments,<span class="stringliteral">&quot;unreplied&quot;</span>=&gt;$unreplied,<span class="stringliteral">&quot;replies&quot;</span> =&gt; $noofreplies );
<a name="l00137"></a>00137 
<a name="l00138"></a>00138         $result = $this-&gt;update(<span class="stringliteral">&#39;id&#39;</span>,$id,$data);
<a name="l00140"></a>00140         <span class="keywordflow">return</span> $result;
<a name="l00141"></a>00141     }
<a name="l00142"></a>00142 
<a name="l00149"></a><a class="code" href="classdbhosportal__original__messages.html#a518fd38a24fbbf1fb3433a94305080d3">00149</a>     function <a class="code" href="classdbhosportal__original__messages.html#a518fd38a24fbbf1fb3433a94305080d3" title="Member function to delete an existing entry in the original messages database.">deleteSingle</a>($id) {
<a name="l00151"></a>00151         $this-&gt;<span class="keyword">delete</span>(<span class="stringliteral">&quot;id&quot;</span>, $id);
<a name="l00153"></a>00153     }
<a name="l00154"></a>00154 
<a name="l00159"></a><a class="code" href="classdbhosportal__original__messages.html#ae1cc98ff5b284f705bc5e8aa2cdb0a20">00159</a>     function <a class="code" href="classdbhosportal__original__messages.html#ae1cc98ff5b284f705bc5e8aa2cdb0a20" title="Member function to output a specfic group of entries.">paginateAll</a>($starting_element,$ending_element) {
<a name="l00160"></a>00160 
<a name="l00161"></a>00161         $sql =  <span class="stringliteral">&quot;select * from (select @rownum:=@rownum+1 rank, p.* from tbl_hosportal_original_messages p, (SELECT @rownum:=0) r limit 1000) as t where rank between $starting_element and $ending_element&quot;</span>;
<a name="l00162"></a>00162         <span class="keywordflow">return</span> $this-&gt;getArray($sql);
<a name="l00163"></a>00163     }
<a name="l00164"></a>00164 
<a name="l00171"></a><a class="code" href="classdbhosportal__original__messages.html#aeab9fc56eebe1362950ffac42c499b30">00171</a>     function <a class="code" href="classdbhosportal__original__messages.html#aeab9fc56eebe1362950ffac42c499b30" title="Member function to get the no of messages that contain the search parameter.">getNoOfSearchedOriginalMessages</a>($searchValue) {
<a name="l00172"></a>00172 
<a name="l00175"></a>00175         $sql=   <span class="stringliteral">&quot;where commenttxt like &#39;%&quot;</span>.$searchValue.<span class="stringliteral">&quot;%&#39; || title like &#39;%$searchValue%&#39; || userid like &#39;%$searchValue%&#39;&quot;</span>;
<a name="l00177"></a>00177         <span class="keywordflow">return</span> $this-&gt;getRecordCount($sql);
<a name="l00178"></a>00178 
<a name="l00179"></a>00179     }
<a name="l00192"></a><a class="code" href="classdbhosportal__original__messages.html#aa29af3b39f7b7a9a5b75fa1180e36062">00192</a>     function <a class="code" href="classdbhosportal__original__messages.html#aa29af3b39f7b7a9a5b75fa1180e36062" title="Member function to get all entries that contain the search parameter.">searchOriginalMessages</a>($searchValue,$number_of_entries_per_page = 5,$starting_element = 0) {
<a name="l00195"></a>00195         $sql=   <span class="stringliteral">&quot;select * from tbl_hosportal_original_messages where commenttxt like &#39;%&quot;</span>.$searchValue.<span class="stringliteral">&quot;%&#39; || title like &#39;%$searchValue%&#39; || userid like &#39;%$searchValue%&#39; order by modified desc LIMIT $number_of_entries_per_page OFFSET $starting_element&quot;</span>;
<a name="l00197"></a>00197         <span class="keywordflow">return</span> $this-&gt;getArray($sql);
<a name="l00198"></a>00198 
<a name="l00199"></a>00199     }
<a name="l00200"></a>00200 
<a name="l00211"></a><a class="code" href="classdbhosportal__original__messages.html#afb980b1f640ed228e9f9ddfb599a9c2c">00211</a>     function <a class="code" href="classdbhosportal__original__messages.html#afb980b1f640ed228e9f9ddfb599a9c2c" title="Member function to sort all entries by latest modified and return that result as...">sortByLatestModified</a>($number_of_entries_per_page = 5,$starting_element = 0) {
<a name="l00215"></a>00215         $sql = <span class="stringliteral">&quot;select*from tbl_hosportal_original_messages order by modified desc LIMIT $number_of_entries_per_page OFFSET $starting_element&quot;</span>;
<a name="l00217"></a>00217         <span class="keywordflow">return</span> $this-&gt;getArray($sql);
<a name="l00218"></a>00218 
<a name="l00219"></a>00219     }
<a name="l00220"></a>00220 
<a name="l00231"></a><a class="code" href="classdbhosportal__original__messages.html#ac0b2be224e44e03dbfff70aa66573722">00231</a>     function <a class="code" href="classdbhosportal__original__messages.html#ac0b2be224e44e03dbfff70aa66573722" title="Member function to sort all entries by oldest modified and return that result as...">sortByOldestModified</a>($number_of_entries_per_page = 5,$starting_element = 0) {
<a name="l00235"></a>00235         $sql = <span class="stringliteral">&quot;select*from tbl_hosportal_original_messages order by modified asc LIMIT $number_of_entries_per_page OFFSET $starting_element&quot;</span>;
<a name="l00236"></a>00236 
<a name="l00238"></a>00238         <span class="keywordflow">return</span> $this-&gt;getArray($sql);
<a name="l00239"></a>00239     }
<a name="l00240"></a>00240 
<a name="l00251"></a><a class="code" href="classdbhosportal__original__messages.html#a895bb8e4ae10a02bef61adcc20dea50d">00251</a>     function <a class="code" href="classdbhosportal__original__messages.html#a895bb8e4ae10a02bef61adcc20dea50d" title="Member function to sort all entries by author A to Z and return that result as an...">sortByAuthorAtoZ</a>($number_of_entries_per_page = 5,$starting_element = 0) {
<a name="l00255"></a>00255         $sql = <span class="stringliteral">&quot;select*from tbl_hosportal_original_messages order by userid asc LIMIT $number_of_entries_per_page OFFSET $starting_element&quot;</span>;
<a name="l00256"></a>00256 
<a name="l00258"></a>00258         <span class="keywordflow">return</span> $this-&gt;getArray($sql);
<a name="l00259"></a>00259     }
<a name="l00260"></a>00260 
<a name="l00271"></a><a class="code" href="classdbhosportal__original__messages.html#a4d2bb59ed7a3d05c3cea1c0d848dba59">00271</a>     function <a class="code" href="classdbhosportal__original__messages.html#a4d2bb59ed7a3d05c3cea1c0d848dba59" title="Member function to sort all entries by author Z to A and return that result as an...">sortByAuthorZtoA</a>($number_of_entries_per_page = 5,$starting_element = 0) {
<a name="l00275"></a>00275         $sql = <span class="stringliteral">&quot;select*from tbl_hosportal_original_messages order by userid desc LIMIT $number_of_entries_per_page OFFSET $starting_element&quot;</span>;
<a name="l00277"></a>00277         <span class="keywordflow">return</span> $this-&gt;getArray($sql);
<a name="l00278"></a>00278 
<a name="l00279"></a>00279     }
<a name="l00280"></a>00280 
<a name="l00291"></a><a class="code" href="classdbhosportal__original__messages.html#a7ca663d8792a359e4b672e36b26746a4">00291</a>     function <a class="code" href="classdbhosportal__original__messages.html#a7ca663d8792a359e4b672e36b26746a4" title="Member function to sort all entries by subject matter A to Z and return that result...">sortBySubjectMatterAtoZ</a>($number_of_entries_per_page = 5,$starting_element = 0) {
<a name="l00295"></a>00295         $sql = <span class="stringliteral">&quot;select*from tbl_hosportal_original_messages order by title asc LIMIT $number_of_entries_per_page OFFSET $starting_element&quot;</span>;
<a name="l00297"></a>00297         <span class="keywordflow">return</span> $this-&gt;getArray($sql);
<a name="l00298"></a>00298     }
<a name="l00299"></a>00299 
<a name="l00310"></a><a class="code" href="classdbhosportal__original__messages.html#a4539c02e8f6863a4c9ca01d9c87397bc">00310</a>     function <a class="code" href="classdbhosportal__original__messages.html#a4539c02e8f6863a4c9ca01d9c87397bc" title="Memeber function to sort all entries by subject matter Z to A and return that result...">sortBySubjectMatterZtoA</a>($number_of_entries_per_page = 5,$starting_element = 0) {
<a name="l00314"></a>00314         $sql = <span class="stringliteral">&quot;select*from tbl_hosportal_original_messages order by title desc LIMIT $number_of_entries_per_page OFFSET $starting_element&quot;</span>;
<a name="l00316"></a>00316         <span class="keywordflow">return</span> $this-&gt;getArray($sql);
<a name="l00317"></a>00317     }
<a name="l00318"></a>00318 
<a name="l00329"></a><a class="code" href="classdbhosportal__original__messages.html#a2ca3c7eeba3986f18efa42e2dd27a363">00329</a>     function <a class="code" href="classdbhosportal__original__messages.html#a2ca3c7eeba3986f18efa42e2dd27a363" title="Member function to sort all entries by most replies and return that result as an...">sortByMostReplies</a>($number_of_entries_per_page = 5,$starting_element = 0) {
<a name="l00333"></a>00333         $sql = <span class="stringliteral">&quot;select*from tbl_hosportal_original_messages order by replies desc LIMIT $number_of_entries_per_page OFFSET $starting_element&quot;</span>;
<a name="l00335"></a>00335         <span class="keywordflow">return</span> $this-&gt;getArray($sql);
<a name="l00336"></a>00336     }
<a name="l00337"></a>00337 
<a name="l00348"></a><a class="code" href="classdbhosportal__original__messages.html#acddae2005579cc482a31f0b9640cb771">00348</a>     function <a class="code" href="classdbhosportal__original__messages.html#acddae2005579cc482a31f0b9640cb771" title="Member function to sort all entries by least replies and return that result as an...">sortByLeastReplies</a>($number_of_entries_per_page = 5,$starting_element = 0) {
<a name="l00352"></a>00352         $sql = <span class="stringliteral">&quot;select*from tbl_hosportal_original_messages order by replies asc LIMIT $number_of_entries_per_page OFFSET $starting_element&quot;</span>;
<a name="l00354"></a>00354         <span class="keywordflow">return</span> $this-&gt;getArray($sql);
<a name="l00355"></a>00355     }
<a name="l00356"></a>00356 }
<a name="l00357"></a>00357 ?&gt;
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Fri May 7 08:42:21 2010 for hosportal by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
